# File Structure & Conventions Assessment

This document provides a thorough assessment of the codebase's file structuring conventions, naming patterns, and organizational cohesion.

---

## Executive Summary

| Aspect | Rating | Summary |
|--------|--------|---------|
| **Directory Naming** | ‚≠ê‚≠ê | Inconsistent (kebab vs PascalCase) |
| **File Naming** | ‚≠ê‚≠ê‚≠ê | Mostly consistent, minor issues |
| **Barrel Exports** | ‚≠ê‚≠ê | Partial implementation |
| **Grouping Strategy** | ‚≠ê‚≠ê | Flat structure, needs hierarchy |
| **Import Patterns** | ‚≠ê‚≠ê‚≠ê‚≠ê | Good alias usage |
| **Overall Convention Cohesion** | ‚≠ê‚≠ê | Needs standardization |

---

## 1. Directory Structure Overview

### Current Structure

```
resources/js/
‚îú‚îÄ‚îÄ actions/            # Wayfinder-generated actions
‚îú‚îÄ‚îÄ components/         # React components (FLAT - 12 files)
‚îÇ   ‚îú‚îÄ‚îÄ config-panel/   # ‚úÖ Has index.ts
‚îÇ   ‚îú‚îÄ‚îÄ ui/             # ‚ùå No index.ts
‚îÇ   ‚îî‚îÄ‚îÄ widget-components/ # ‚úÖ Has index.tsx
‚îú‚îÄ‚îÄ constants/          # Application constants
‚îú‚îÄ‚îÄ context/            # React contexts
‚îú‚îÄ‚îÄ lib/                # Utility functions
‚îú‚îÄ‚îÄ pages/              # Route pages
‚îú‚îÄ‚îÄ routes/             # Route definitions
‚îú‚îÄ‚îÄ types/              # TypeScript types
‚îî‚îÄ‚îÄ wayfinder/          # Generated routes
```

### Backend Structure (Laravel Standard)

```
app/
‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îú‚îÄ‚îÄ Controllers/    # PascalCase ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ Middleware/     # PascalCase ‚úÖ
‚îú‚îÄ‚îÄ Models/             # PascalCase ‚úÖ
‚îú‚îÄ‚îÄ Providers/          # PascalCase ‚úÖ
‚îî‚îÄ‚îÄ Services/           # PascalCase ‚úÖ
```

> [!IMPORTANT]
> Backend follows Laravel conventions perfectly. **Frontend has convention conflicts.**

---

## 2. Naming Convention Analysis

### Directory Naming Conflicts

| Type | Pattern | Examples | Standard |
|------|---------|----------|----------|
| **Subdirectories** | kebab-case | `config-panel`, `widget-components` | ‚úÖ React standard |
| **Base directories** | lowercase | `components`, `lib`, `types` | ‚úÖ Common standard |
| **Laravel** | PascalCase | `Controllers`, `Models` | ‚úÖ PSR-4 standard |

> [!WARNING]
> **Conflict**: `ui/` uses lowercase but should arguably be `UI/` or stay as `ui/` - currently inconsistent with other React subdirectories.

### File Naming Patterns

````carousel
### React Components (.tsx)

| File | Convention | Assessment |
|------|------------|------------|
| `ArtboardCanvas.tsx` | PascalCase | ‚úÖ Correct |
| `ArtboardContainer.tsx` | PascalCase | ‚úÖ Correct |
| `WidgetShell.tsx` | PascalCase | ‚úÖ Correct |
| `ComponentSidebar.tsx` | PascalCase | ‚úÖ Correct |
| `DashboardCanvas.tsx` | PascalCase | ‚úÖ Correct |

**Verdict**: Component files follow PascalCase correctly.
<!-- slide -->
### Utility Files (.ts)

| File | Convention | Assessment |
|------|------------|------------|
| `artboard-utils.ts` | kebab-case | ‚úÖ Correct |
| `component-layout.ts` | kebab-case | ‚úÖ Correct |
| `collision-utils.ts` | kebab-case | ‚úÖ Correct |
| `grid-resolution.ts` | kebab-case | ‚úÖ Correct |
| `utils.ts` | lowercase | ‚úÖ Acceptable |
| `use-google-sheets.ts` | kebab-case | ‚úÖ Correct (hook) |

**Verdict**: Utility files follow kebab-case correctly.
<!-- slide -->
### Type Definition Files (.ts)

| File | Convention | Assessment |
|------|------------|------------|
| `artboard.ts` | lowercase | ‚ö†Ô∏è Should be kebab-case |
| `dashboard.ts` | lowercase | ‚ö†Ô∏è Should be kebab-case |
| `component-config.ts` | kebab-case | ‚úÖ Correct |
| `config-schemas.ts` | kebab-case | ‚úÖ Correct |
| `index.d.ts` | lowercase | ‚úÖ Standard |

**Verdict**: Mixed conventions - some lowercase, some kebab-case.
<!-- slide -->
### Page Components

| File | Convention | Assessment |
|------|------------|------------|
| `Dashboard.tsx` | PascalCase | ‚úÖ Correct |
| `welcome.tsx` | lowercase | ‚ùå **WRONG** - should be `Welcome.tsx` |

**Verdict**: Inconsistent page naming.
````

### File Naming Summary

```diff
+ 85% of React components use PascalCase correctly
+ 100% of utility files use kebab-case correctly
- Type files use mixed conventions (lowercase vs kebab-case)
- Pages have inconsistent casing (Dashboard.tsx vs welcome.tsx)
```

---

## 3. Barrel Export Analysis

### Current State

| Directory | Has index.ts | Exports Pattern |
|-----------|--------------|-----------------|
| `config-panel/` | ‚úÖ Yes | Named exports |
| `widget-components/` | ‚úÖ Yes (.tsx) | Named + default |
| `ui/` | ‚ùå No | Direct imports required |
| `lib/` | ‚ùå No | Direct imports required |
| `types/` | ‚ö†Ô∏è Has [index.d.ts](file:///c:/Users/Local%20User/kernel/resources/js/types/index.d.ts) | Ambient declarations only |
| `constants/` | ‚ùå No | Direct imports required |
| `context/` | ‚ùå No | Direct imports required |

### Impact on Import Patterns

**Current verbosity (no barrel exports in `ui/`):**
```typescript
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Switch } from '@/components/ui/switch';
import { Separator } from '@/components/ui/separator';
// 5 separate imports!
```

**With barrel export:**
```typescript
import { Button, Input, Label, Switch, Separator } from '@/components/ui';
// 1 import!
```

### Import Statistics

| Import Pattern | Count | Notes |
|----------------|-------|-------|
| `@/components/ui/*` | 47 | No barrel, verbose |
| `@/components/config-panel` | 2 | Uses barrel ‚úÖ |
| `@/components/widget-components` | 1 | Uses barrel ‚úÖ |
| Direct component imports | 8 | Could use barrel |

---

## 4. Grouping Strategy Analysis

### Current Flat Structure Issues

The `components/` directory has **12 top-level files** without logical grouping:

```
components/
‚îú‚îÄ‚îÄ AddArtboardPanel.tsx      # Artboard-related
‚îú‚îÄ‚îÄ ArtboardCanvas.tsx        # Artboard-related
‚îú‚îÄ‚îÄ ArtboardContainer.tsx     # Artboard-related
‚îú‚îÄ‚îÄ ArtboardHeaderOverlay.tsx # Artboard-related
‚îú‚îÄ‚îÄ ArtboardInspector.tsx     # Artboard-related
‚îú‚îÄ‚îÄ ArtboardSettingsDialog.tsx# Artboard-related
‚îú‚îÄ‚îÄ ArtboardToolbar.tsx       # Artboard-related
‚îú‚îÄ‚îÄ ComponentSidebar.tsx      # Sidebar-related
‚îú‚îÄ‚îÄ ComponentToolbox.tsx      # Sidebar-related
‚îú‚îÄ‚îÄ DashboardCanvas.tsx       # Dashboard-related
‚îú‚îÄ‚îÄ FloatingToolbar.tsx       # Toolbar-related
‚îî‚îÄ‚îÄ WidgetShell.tsx           # Widget-related
```

> [!CAUTION]
> **7 files** are `Artboard*` related but stored flat at the component root.

### Recommended Grouping

```
components/
‚îú‚îÄ‚îÄ artboard/                    # NEW: Artboard feature group
‚îÇ   ‚îú‚îÄ‚îÄ ArtboardCanvas.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ArtboardContainer.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ArtboardHeaderOverlay.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ArtboardInspector.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ArtboardSettingsDialog.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ArtboardToolbar.tsx
‚îÇ   ‚îú‚îÄ‚îÄ AddArtboardPanel.tsx
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                 # Barrel export
‚îú‚îÄ‚îÄ sidebar/                     # NEW: Sidebar feature group
‚îÇ   ‚îú‚îÄ‚îÄ ComponentSidebar.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ComponentToolbox.tsx
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ widget/                      # NEW: Widget feature group
‚îÇ   ‚îú‚îÄ‚îÄ WidgetShell.tsx
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ toolbar/                     # NEW: Toolbar feature group
‚îÇ   ‚îú‚îÄ‚îÄ FloatingToolbar.tsx
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ config-panel/                # KEEP: Already grouped
‚îú‚îÄ‚îÄ ui/                          # KEEP: Already grouped
‚îî‚îÄ‚îÄ widget-components/           # KEEP: Already grouped
```

---

## 5. Import Alias Analysis

### Configuration

```json
// tsconfig.json
{
  "baseUrl": ".",
  "paths": {
    "@/*": ["./resources/js/*"]
  }
}
```

### Import Alias Usage

| Pattern | Usage | Assessment |
|---------|-------|------------|
| `@/components/*` | ‚úÖ Consistent | Good |
| `@/lib/*` | ‚úÖ Consistent | Good |
| `@/types/*` | ‚úÖ Consistent | Good |
| `@/context/*` | ‚úÖ Consistent | Good |
| `@/constants/*` | ‚úÖ Consistent | Good |

> [!TIP]
> Import aliases are used consistently throughout the codebase. This is a strength.

---

## 6. Specific Convention Violations

### Critical Issues

| File | Issue | Severity |
|------|-------|----------|
| [welcome.tsx](file:///c:/Users/Local%20User/kernel/resources/js/pages/welcome.tsx) | lowercase page name, should be `Welcome.tsx` | üî¥ High |
| `ui/` directory | 14 files without barrel export | üü° Medium |
| [types/artboard.ts](file:///c:/Users/Local%20User/kernel/resources/js/types/artboard.ts) | Inconsistent with [component-config.ts](file:///c:/Users/Local%20User/kernel/resources/js/types/component-config.ts) | üü¢ Low |(

### Index File Extension Inconsistency

```diff
- config-panel/index.ts     (TypeScript)
- widget-components/index.tsx (React)
```

Both should use the same extension pattern.

---

## 7. Convention Comparison Matrix

| Convention Area | Laravel (Backend) | React (Frontend) | Alignment |
|-----------------|-------------------|------------------|-----------|
| Directory naming | PascalCase | kebab-case/lowercase | ‚ùå Different (acceptable) |
| Class files | PascalCase.php | PascalCase.tsx | ‚úÖ Aligned |
| Utility files | N/A | kebab-case.ts | ‚úÖ Standard |
| Index files | N/A | Mixed | ‚ö†Ô∏è Inconsistent |
| Barrel exports | N/A | Partial | ‚ö†Ô∏è Incomplete |

---

## 8. Recommendations

### Priority 1: Fix Critical Naming Violations

```diff
pages/
- welcome.tsx
+ Welcome.tsx
```

### Priority 2: Create Missing Barrel Exports

| Directory | Action |
|-----------|--------|
| `ui/` | Add [index.ts](file:///c:/Users/Local%20User/kernel/resources/js/routes/index.ts) exporting all UI components |
| `lib/` | Add [index.ts](file:///c:/Users/Local%20User/kernel/resources/js/routes/index.ts) exporting utilities |
| `types/` | Add proper [index.ts](file:///c:/Users/Local%20User/kernel/resources/js/routes/index.ts) (not [.d.ts](file:///c:/Users/Local%20User/kernel/resources/js/types/index.d.ts)) |
| `context/` | Add [index.ts](file:///c:/Users/Local%20User/kernel/resources/js/routes/index.ts) exporting context |
| `constants/` | Add [index.ts](file:///c:/Users/Local%20User/kernel/resources/js/routes/index.ts) exporting constants |

### Priority 3: Group Related Components

```diff
components/
+ ‚îú‚îÄ‚îÄ artboard/               # Group 7 Artboard* files
+ ‚îÇ   ‚îî‚îÄ‚îÄ index.ts            # Barrel export
+ ‚îú‚îÄ‚îÄ sidebar/                # Group sidebar components
+ ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
+ ‚îú‚îÄ‚îÄ widget/                 # Group widget components
+ ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
- ‚îú‚îÄ‚îÄ ArtboardCanvas.tsx      # Remove from root
- ‚îú‚îÄ‚îÄ ArtboardContainer.tsx   # Remove from root
- ‚îú‚îÄ‚îÄ (5 more artboard files) # Remove from root
```

### Priority 4: Standardize Type File Naming

```diff
types/
- artboard.ts
+ artboard-types.ts
- dashboard.ts
+ dashboard-types.ts
```

---

## 9. Convention Score Summary

| Category | Current | Target | Gap |
|----------|---------|--------|-----|
| File Naming | 75/100 | 95/100 | -20 |
| Directory Structure | 50/100 | 90/100 | -40 |
| Barrel Exports | 30/100 | 90/100 | -60 |
| Import Patterns | 90/100 | 95/100 | -5 |
| **Overall** | **61/100** | **92/100** | **-31** |

---

## 10. Quick Reference: Recommended Conventions

### Component Files
- **Naming**: `PascalCase.tsx`
- **Location**: Feature subdirectory under `components/`
- **Example**: `components/artboard/ArtboardCanvas.tsx`

### Utility Files  
- **Naming**: `kebab-case.ts`
- **Location**: `lib/`
- **Example**: [lib/artboard-utils.ts](file:///c:/Users/Local%20User/kernel/resources/js/lib/artboard-utils.ts)

### Type Files
- **Naming**: `kebab-case.ts` (prefer with `-types` suffix for clarity)
- **Location**: `types/`
- **Example**: `types/artboard-types.ts`

### Hooks
- **Naming**: `use-{name}.ts` (kebab-case)
- **Location**: `hooks/` (create if needed) or `lib/`
- **Example**: `hooks/use-canvas-zoom.ts`

### Barrel Exports
- **File**: [index.ts](file:///c:/Users/Local%20User/kernel/resources/js/routes/index.ts) (not [.tsx](file:///c:/Users/Local%20User/kernel/resources/js/ssr.tsx) unless containing JSX)
- **Pattern**: Named exports only
- **Example**:
```typescript
export { ArtboardCanvas } from './ArtboardCanvas';
export { ArtboardContainer } from './ArtboardContainer';
export type { ArtboardCanvasProps } from './ArtboardCanvas';
```
